<CheckTrafficScreen>:
    # name: "checktraffic"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            size: self.size
            pos: self.pos

    BoxLayout:  # Use BoxLayout as the main layout
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(10)

        Label:
            text: "[b]City Traffic Checker[/b]"
            markup: True
            font_size: "24sp"
            color: 0, 0.4, 1, 1
            valign: "middle"
            halign: "center"
            size_hint_y: None  # Label height should be defined by its text
            height: self.texture_size[1] + dp(20)  # Add padding to label height
            text_size: self.size
            canvas.before:
                Color:
                    rgba: 0.8, 0.8, 0.8, 1
                Line:
                    width: 1.5
                    rectangle: (self.x, self.y, self.width, self.height)

        BoxLayout: #boxlayout for origin and destination
            orientation: 'horizontal'
            size_hint_y: None
            height: self.minimum_height
            spacing: dp(10)

            Label:
                text: "[b]Origin:[/b]"
                markup: True
                color: 0, 0.3, 1, 1
                valign: "middle"
                halign: "center"
                size_hint_x: None #added
                width: self.texture_size[0] + dp(20)
                text_size: self.size
                canvas.before:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

            Spinner:
                id: origin_spinner
                text: "Select Origin"
                values: ["Thamel", "Lazimpat", "Baneshwor", "Baluwatar", "Patan", "Boudha", "Chabahil", "Dilli Bazaar", "Gairidhara", "Kalimati"]
                background_color: 0.8, 0.8, 0.8, 1
                color: 1, 1, 1, 1
                size_hint_x: 1

            Label:
                text: "[b]Destination:[/b]"
                markup: True
                color: 0, 0.3, 1, 1
                valign: "middle"
                halign: "center"
                size_hint_x: None #added
                width: self.texture_size[0] + dp(20)
                text_size: self.size
                canvas.before:
                    Color:
                        rgba: 0.8, 0.8, 0.8, 1
                    Line:
                        width: 1
                        rectangle: (self.x, self.y, self.width, self.height)

            Spinner:
                id: destination_spinner
                text: "Select Destination"
                values: ["Thamel", "Lazimpat", "Baneshwor", "Baluwatar", "Patan", "Boudha", "Chabahil", "Dilli Bazaar", "Gairidhara", "Kalimati"]
                background_color: 0.8, 0.8, 0.8, 1
                color: 1, 1, 1, 1
                size_hint_x: 1

        # Color Box
        BoxLayout:
            id: traffic_color_box
            size_hint_y: None
            height: dp(50)
            background_color: 0, 1, 0, 1  # Default: Green
            size_hint_x: 1
            orientation: 'horizontal'

            # Text Label
            Label:
                id: traffic_text_label
                text: ""  # Start with empty text, will be updated later
                markup: True
                font_size: "16sp"
                halign: "left"
                valign: "middle"
                color: 0, 0, 0, 1
                size_hint_x: None
                width: self.texture_size[0]
                padding: [dp(10), 0, 0, 0]

        # CHECK BUTTON with icon
        Button:
            size_hint_y: None
            height: dp(50)
            background_normal: ''
            background_color: 0, 0.4, 1, 1
            on_release: root.check_traffic()
            padding: dp(20), 0, dp(20), 0

            BoxLayout:
                orientation: 'horizontal'
                spacing: dp(10)
                padding: dp(5)
                size_hint_x: 1
                size_hint_y: 1

                Label:
                    text: "Check Traffic"
                    font_size: "18sp"
                    color: 1, 1, 1, 1
                    valign: "middle"
                    halign: "left"
                    size_hint_x: None
                    width: self.texture_size[0]
