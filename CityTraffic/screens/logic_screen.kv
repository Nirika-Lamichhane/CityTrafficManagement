<CheckTrafficScreen>:
    name: "checktraffic"
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1  # White background
        Rectangle:
            size: self.size
            pos: self.pos

    RelativeLayout:  # Use RelativeLayout as the base layout

        # Title Label as Header at the top
        Label:
            text: "[b]City Traffic Checker[/b]"
            markup: True
            font_size: "24sp"
            color: 0, 0.4, 1, 1
            valign: "middle"
            halign: "center"
            size_hint_y: None
            height: dp(60)
            text_size: self.size
            pos_hint: {'center_x': 0.5, 'top': 1}  # Position at top center
            padding_y: dp(20)

        BoxLayout: # wrap the rest of the content in a box layout.
            orientation: "vertical"
            spacing: dp(10)
            #y: self.parent.height - self.height - dp(50) # position the boxlayout at the certain space below the header.
            pos_hint: {'x': 0.5, 'top': 1} #  Position the boxlayout at the top

            # FORM INPUTS (ORIGIN / DESTINATION)
            GridLayout:
                cols: 2
                row_force_default: True
                row_default_height: dp(50)
                spacing: dp(10)
                size_hint_y: None
                height: self.minimum_height
                size_hint_x: 1
                padding: dp(20),  dp(100), dp(20), 0 # Add padding to the top of the grid layout

                Label:
                    text: "Origin:"
                    color: 0, 0.4, 1, 1
                    valign: "middle"
                    halign: "left"
                    text_size: self.size

                Spinner:
                    id: origin_spinner
                    text: "Select Origin"
                    values: ["Thamel", "Lazimpat", "Baneshwor", "Baluwatar", "Patan", "Boudha", "Chabahil", "Dilli Bazaar", "Gairidhara", "Kalimati"]
                    background_color: 1, 1, 1, 1
                    color: 0, 0, 0, 1
                    size_hint_x: 1

                Label:
                    text: "Destination:"
                    color: 0, 0.4, 1, 1
                    valign: "middle"
                    halign: "left"
                    text_size: self.size

                Spinner:
                    id: destination_spinner
                    text: "Select Destination"
                    values: ["Thamel", "Lazimpat", "Baneshwor", "Baluwatar", "Patan", "Boudha", "Chabahil", "Dilli Bazaar", "Gairidhara", "Kalimati"]
                    background_color: 1, 1, 1, 1
                    color: 0, 0, 0, 1
                    size_hint_x: 1

            # RESULT LABEL
            Label:
                id: content_label
                text: "Traffic status will appear here."
                font_size: "16sp"
                halign: "center"
                valign: "middle"
                text_size: self.size
                color: 0, 0, 0, 1
                size_hint_y: None
                height: self.texture_size[1]
                padding_x: dp(20)

            # CHECK BUTTON with icon
            Button:
                size_hint_y: None
                height: dp(50)
                background_normal: ''
                background_color: 0, 0.4, 1, 1
                color: 1, 1, 1, 1
                on_release: root.check_traffic()
                padding: dp(20), 0, dp(20), 0

                BoxLayout:
                    orientation: 'horizontal'
                    spacing: dp(10)
                    padding: dp(5)
                    size_hint_x: 1
                    size_hint_y: 1

                    Image:
                        source: "assets/Sign-check-icon.png"
                        size_hint_x: None
                        width: dp(30)
                        allow_stretch: True
                        keep_ratio: True

                    Label:
                        text: "Check Traffic"
                        font_size: "18sp"
                        color: 1, 1, 1, 1
                        valign: "middle"
                        halign: "left"
                        size_hint_x: None
                        width: self.texture_size[0]
